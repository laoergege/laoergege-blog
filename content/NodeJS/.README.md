---
discussionID: PAOGFr8H8qV96CLD_wAMb
tags:
  - nodejs
---
# NodeJS

- NodeJS
  - 模块机制
    - [模块规范](../JavaScript/JavaScript%20%E6%A8%A1%E5%9D%97.md)
    - 模块解析机制
    - [Corepack 与包管理](./Corepack%20与包管理.md)
  - [异步编程](../JavaScript/JavaScript%20异步编程.md)
  - 错误及调试
    - 错误处理
    - 代码调试
      - [调试指南](https://nodejs.org/zh-cn/docs/guides/debugging-getting-started/)
    - 内存泄漏
  - [Node.js 事件循环](./Node.js%20事件循环.md)
    - [NodeJS 架构](./NodeJS%20%E6%9E%B6%E6%9E%84.md)
  - 全局变量及内置模块
    - [文件操作](#文件操作)
    - Event Emitter
    - Buffer、Stream：解决大文件内存缓存限制问题
      - [Node Stream](https://github.com/zoubin/streamify-your-node-program/blob/master/README.md)
      - [Node.js Streams: Everything you need to know](https://www.freecodecamp.org/news/node-js-streams-everything-you-need-to-know-c9141306be93/)
      - [stream-handbook](https://github.com/substack/stream-handbook)
      - [Understanding Streams in Node.js](https://nodesource.com/blog/understanding-streams-in-nodejs)
    - 多进程、多线程
      - Cluster
        - [How to use Cluster to increase Node.js performance](https://www.arubacloud.com/tutorial/how-to-use-cluster-to-increase-node-js-performance.aspx)
      - ChildProcess
        - Spawn vs Fork vs Exec
      - WorkerThreads
        - [深入理解 Node.js Worker Threads](https://zhuanlan.zhihu.com/p/167920353)
    - VM
      - [NPM酷库：vm2，安全的沙箱环境](https://segmentfault.com/a/1190000012672620)
  - 深入
    - 第三方扩展
      - C++ addons NAPI
      - DLL
        - [node-ffi](https://github.com/node-ffi/node-ffi)
      - WebAssembly
    - [Node.js 源码剖析](https://theanarkh.github.io/understand-nodejs/)
  - 开发实战
    - [CLI](#cli)
    - [Web 服务开发](#web-服务开发)
    - NodeJS 单元测试
      - Jest
      - [Mocha](https://mochajs.org/)
    - NodeJS 运行及部署
      - [PM2](https://pm2.keymetrics.io/)
    - NodeJS 日志及监控
      - 日志
        - [debug](https://github.com/debug-js/debug)
        - [winston](https://github.com/winstonjs/winston)
        - [pino](https://github.com/pinojs/pino)
          - https://betterstack.com/community/guides/logging/how-to-install-setup-and-use-pino-to-log-node-js-applications/#centralizing-and-monitoring-your-node-js-logs
    - NodeJS 性能优化
      - CPU（计算性能优化、JS Profile）
        1. 减少不必要的计算
        2. 空间换时间
        3. 提高计算能力
           1. C++ 插件
        4. 多进程、多线程
      - 内存（提高系统性能）
        - 减少内存使用，减少GC次数
          - Buffer、Stream
        - 内存泄漏，导致 GC 过久
          - 内存泄漏
            - JS 垃圾回收机制
            - 内存泄漏排查
          - APM
            - [clinicjs](https://clinicjs.org/)
            - [easy-monitor](https://github.com/hyj1991/easy-monitor)

## CLI

- CLI
  - 参数
    - 命令行参数
      - process.argv
      - [commander.js](https://github.com/tj/commander.js#readme)
      - [clipanion](https://github.com/arcanis/clipanion)
      - [yargs](https://github.com/yargs/yargs)
    - 环境变量
      - process.env
      - 环境配置文件：[dotenv](https://github.com/motdotla/dotenv#readme)
  - 用户输入
    - [process.stdin](https://nodejs.org/api/process.html#processstdin)
    - readline
    - [inquirer](https://github.com/SBoudrias/Inquirer.js#readme)
    - [prompts](https://github.com/terkelg/prompts#readme)
    - [enquirer](https://github.com/enquirer/enquirer#built-in-prompts)
  - 打印输出
    - process.stdout
    - process.stderr
    - console.log
    - 美化
      - 文本
        - [chalk](https://github.com/chalk/chalk)
        - [kleur](https://github.com/lukeed/kleur)
        - [figlet](https://github.com/patorjk/figlet.js)
      - 文本框：[boxen](https://github.com/sindresorhus/boxen)
      - 进度
        - [ora](https://github.com/sindresorhus/ora#readme)
        - [cli-progress](https://github.com/npkgz/cli-progress)
      - 列表
        - [listr](https://github.com/SamVerschueren/listr)
  - 子进程
    - [zx](https://github.com/google/zx)
  - shellbag：`#!/usr/bin/env node`
  - package.json `bin`

## 文件操作

- global
  - `process.cwd()`
  - `__filename`
  - `__dirname`
- fs
  - stat
  - path
    - string
      - POSIX 风格
    - Buffer
    - 'file://' URL
  - open
    - flag
      - ![图 2](images/3e100e3652d03573f31ad92f0915a76b890484277639d2aa5de4e98aebc3a5ba.png)
      - https://nodejs.dev/en/api/v19/fs/#file-system-flags 
    - fd: filehandle 
      - readFile
      - writeFile
  - close
  - folders
    - access：检查文件夹是否存在
    - mkdir：新建一个文件夹
    - readdir：读取目录的内容
    - rename：重命名文件夹
    - rmdir：删除文件夹
- path
  - relative
  - resolve
  - basename
  - dirname
  - extname
  - normalize
- npm
  - [chokidar](https://github.com/paulmillr/chokidar)
  - [fs-extra](https://github.com/jprichardson/node-fs-extra)
  - [globby](https://github.com/sindresorhus/globby)
  - [glob](https://github.com/isaacs/node-glob)
- 系统分割符号问题？
  - 不带路径风格符的 path 方法解析：如 `path.resolve(__dirname, 'folder', 'file.txt')`
  - 硬编码路径
    - [pathe](https://github.com/unjs/pathe)

## Web 服务开发

- Web 服务开发
  - APIs
    - RESTFul API
      - [前后端接口规范 - RESTful 版](https://github.com/olivewind/restful-api-specification)
    - [RPC](https://grpc.io/)
  - 业务处理
    - [身份验证和授权](./身份验证及授权.md)
    - 安全
      - 数据检验
        - JSON Schema
        - typescript 运行验证
      - 数据加密
      - [Web 安全](../浏览器原理及WebAPI/Web%20安全.md)
  - HTML 渲染
    - 模板引擎
      - pug
      - ejs
  - 数据库
    - ORM
      - Prisma
      - Sequelize
      - TypeORM
  - 工程
    - 测试
      - 压测 http 服务（ab）
        - QPS
        - 吞吐率

### BFF

- BFF
  - 数据
    - 数据聚合和裁剪
    - 协议转换
  - 路由
    - 路由条件
    - 反向代理
      - [fastify/fast-proxy](https://github.com/fastify/fast-proxy)
    - 提供路由分发能力
      - hard coding
      - URL规范化
      - 中心化配置
  - 可用性保障
    - 限流
    - 熔断降级
    - 负载均衡
    - 缓存
  - 安全
    - CORS
    - 合理使用 Content-Security-Policy
    - 使用 HTTPS/HSTS
    - 设置监控报警以及调用链追踪能力
  - 身份验证和权限校验
  - 扩展
    - 中间件
    - 插件：Hooks 设计