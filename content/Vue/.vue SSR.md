---
discussionID: LYLJDYHAoS9pirJMdDiWf
---

SSR 的工作原理是使用服务器端进程生成应用程序的初始 HTML 结构，然后使用客户端 JavaScript 在客户端初始化或“水合”应用程序状态。

客户端激活 (hydration)
- Vue 会断言客户端生成的虚拟 DOM 树与从服务器渲染出来的 DOM 结构是相匹配的。
  - 确保 SSR 工作的第一个关键是确保应用的状态在客户端和服务端一致。
    - [编写通用的代码](https://v3.cn.vuejs.org/guide/ssr/universal.html#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E7%9A%84%E6%95%B0%E6%8D%AE%E5%93%8D%E5%BA%94%E6%80%A7)
  - 第二个关键是留意 SSR + 客户端激活时 HTML 的有效性会因浏览器不同而不同。





- Nuxt
  - 架构
    - 视图层 vue + vue-router
    - 服务层 Nitro(为 Node.js、Deno、Workers 等提供跨平台支持)
    - 构建层 vite + esbuild
  - 渲染模式
    - CSR
    - Prerender
    - SSR
      - 原理
        - 由服务端直接渲染输出 HTML 内容到客户端
        - 再在客户端将静态的 HTML“激活”(hydrate) ，使之能够交互
      - good
        - 更快的首屏加载
        - 更好的 SEO
      - bad
        - 开发中的限制。浏览器端特定的代码只能在某些生命周期钩子中使用；一些外部库可能需要特殊处理才能在服务端渲染的应用中运行。
        - 需要更多的服务端负载及运维
      - 延伸
        - SSG
          - 预渲染模式，在构建过程生成静态页面
        - ISR
        - ESR
        - SWR
  - Nitro
    - 对 Node.js、浏览器、服务工作者等的跨平台支持。
    - 具有热模块重新加载的开发服务器。
    - 自动代码拆分和异步加载块
    - API 路由支持
      - [h3](https://github.com/unjs/h3)
      - 类型化的 API 路由
    - 开箱即用的无服务器支持
    - 静态+无服务器站点的混合模式
- SSR
  - vue 实现
    - `createSSRApp` + `renderToString`
    - 客户端激活


## 开发中的 SSR 架构