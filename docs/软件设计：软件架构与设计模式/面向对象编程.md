# 面向对象编程  

- 面向对象编程
  - 核心概念就是对象；用面向对象风格写出的程序，本质上就是一堆对象之间的交互
  - 面向对象面向的是“对象”，而不是类
    - 对象本身就是一个独立的个体
  - 对象特征（面向对着）
    - 封装
      - 封装，是面向对象的根基。面向对象编程就是要设计出一个一个可以组合，可以复用的单元。然后，组合这些单元完成不同的功能。
      - 如何封装：基于行为进行封装，不要暴露实现细节，最小化接口暴露
        - **封装的重点在于隐藏内部数据及实现细节，而对外提供了哪些行为接口**
        - 因为数据是实现，是易变的，应该隐藏起来，不能对外暴露，导致内部遭到破坏，代码难以预测、维护
    - [继承](#继承)
    - [多态一个接口多种形态](#多态一个接口多种形态)

## 继承

### 继承不是一种好的代码复用

继承分为两种，实现继承（extends）和接口继承（implements）。实现继承是站在子类的视角看问题，从父类实现中继承代码复用；接口继承则是站在父类的视角，接口继承更多是与多态相关。

从实现继承来看父类：父类是干什么用的呢？就是把一些公共代码放进去，之后在实现其他子类时，可以少写一些代码。讲程序库的时候，我们说过，设计的职责之一就是消除重复，代码复用。所以，在很多人的印象中，继承就是一种代码复用的方式。但：

- 把实现继承当作一种代码复用的方式，并不是一种值得鼓励的做法
- 实现继承通常也是一种受程序设计语言局限的思维方式

实现继承带来的问题：

- 多重继承可能带来冲突或者单继承带来的限制
- 代码耦合：所继承的基类方法与属性都是不可控的（违反依赖倒置原则）

### 代码复用：组合优于继承

**面向组合编程**：将不同的关注点分离出来，每一个关注点成为一个模块，在需要的时候组装起来。

## 多态：一个接口，多种形态

多态：**一个接口，多种形态**。多态基于接口概念，**接口将变的部分和不变的部分隔离开来**，在二者之间建立起一个边界。不变的部分就是接口的约定，而变的部分就是外部各自的实现。在软件开发中，对系统影响最大的就是变化。

### 面向接口编程

故一个重要的编程原则就是**面向接口编程**。面向接口编程的价值就根植于多态，也正是因为有了多态，这是很多设计原则的基础：一些设计原则，比如，开闭原则、接口隔离原则才得以成立，相应地，设计模式才有了立足之本。

只要能够遵循相同的接口，就可以表现出来多态。但，多态并不一定要依赖于继承。多态依赖于继承，这只是某些程序设计语言自身的特点。

比如，在动态语言中，有一个常见的说法，叫 Duck Typing，就是说，如果走起来像鸭子，叫起来像鸭子，那它就是鸭子。两个类可以不在同一个继承体系之下，但是，只要有同样的方法接口，就是一种多态。

```js
let duck = {
  call() {
    console.log("鸭叫")
  }
}

let chicken = {
  call() {
    console.log("鸡叫")
  }
}

function make_call(animal) {
  animal.call()
}
make_call(duck)
make_call(chicken)
```

故面向对象编程中，更重要的是封装和多态。

而要实现多态，需要找出不同事物的共同点，建立起抽象，这也是很多程序员更好地运用多态的阻碍。而我们找出共同点，前提是要分离关注点。