- 函数式编程
  - 编程元素就是函数，函数是一等公民，这里的函数指的是**数学的函数**
  - 函数编程的特性
    - **不可变性**
      - 值，一旦初始化之后就不再改变的量
        - 纯函数式编程语言中的变量也不是命令式编程语言中的变量，即存储状态的单元，而是代数中的变量，即一个值的名称，这就意味着变量的值是不可变的
        - 由于变量值是不可变的，对于值的操作并不是修改原来的值，而是修改新产生的值，原来的值保持不便
      - 纯函数
        - 对于相同的输入，给出相同的输出
        - 没有[副作用](https://zh.m.wikipedia.org/zh-cn/%E5%89%AF%E4%BD%9C%E7%94%A8_(%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6))
      - 函数式编程的不变性主要体现在值和纯函数，把值和纯函数合起来看，值保证不会显式改变一个量，而纯函数保证的是，不会隐式改变一个量
    - 组合性
      - 高阶函数（类比数学中的复合函数）：接收函数作为输入，或者返回一个函数作为输出
        - 高阶函数提供了一种函数级别上的依赖注入（或反转控制）机制
      - 能把模型拆解成多个可以组合的构造块，也是“分离关注点”的能力，然后由使用者根据自己需要将这些构造块组合起来，提供出新的模型
    - 列表转换思维：
      - 最基础的三个转换是：map、filter 和 reduce
    - 循环：递归
    - 其他
      - Monad：函数式编程不太擅长处理可变状态和处理 IO，要么引入可变变量，要么通过 Monad 来进行封装（如State Monad和IO Monad）
      - 惰性求值
      - 偏应用函数（Partially Applied Functions）
      - 柯里化（Currying）
      - 闭包（Closure）

绝大多数涉及到可变或者副作用的代码，应该都是与外部系统打交道的


我们说过结构化编程给我们提供了一些基础的控制结构，那其实也是一层封装，只不过，我们在编程之初就熟悉了 if、for 之类的写法。如果你同样熟悉函数式编程的基础设施，这些代码理解起来同那些控制结构没有什么本质区别，而且这些基础设施的抽象级别要比那些控制结构更高，提供了更好的表达性。


我们可以用面向对象编程的方式对系统的结构进行搭建，然后，用函数式编程的理念对函数接口进行设计。你可以把它理解成盖楼，用面向对象编程搭建大楼的骨架，用函数式编程设计门窗。

设计可以组合的函数接口：一个好的函数式的接口，需要我们做的同样是“分离关注点”

函数式编程中，还有一个重要的体系，就是列表转换的思想，将很多操作分解成若干转换的组合。最基础的三个转换是：map、filter 和 reduce，更多的转换操作都可以基于这三个转换完成。



我们说过，函数式编程中的函数源自数学中的函数。在这个语境里，函数就是纯函数，一个函数计算之后是不会产生额外的改变的，而函数中用到的一个一个量就是值，它们是不会随着计算改变的。所以，在函数式编程中，计算天然就是不变的。
正是由于不变性的存在，我们在前面遇到的那些问题也就不再是问题了。一方面，如果你拿到一个量，这次的值是 1，下一次它还是 1，我们完全不用担心它会改变。另一方面，我们调用一个函数，传进去同样的参数，它保证给出同样的结果，行为是完全可以预期的，不会碰触到其他部分。即便是在多线程的情况下，我们也不必考虑同步的问题，后续一系列的问题也就不存在了。


函数式编程，限制使用赋值语句，它是对程序中的赋值施加了约束。
理解了不变性，你应该知道这句话的含义了，一旦初始化好一个量，就不要随便给它赋值了。



Event Sourcing记录每一次状态变化。



变化是软件开发的永恒主题，所以在编码实践上尽量的编写不变的纯函数和类，将变化的粒度控制到最小
作者回复: 变化是需求层面的不得已，不变是代码层面的努力控制。




函数式的做法就更加贴近计算与组合的本质，函数式编程就是通过组合这些细小的映射体来构建复杂的映射体，所以组合才是functional programming的本质







所谓状态是对象某时间的快照，我们引入状态却把时间参数隐藏起来，于是我们不得不引入锁来保持一致性。强一致性（控制），最终一致性（回避），事件溯源（引入），这一步步正是重新正视我们过去抽象偷懒引来的问题。计算或逻辑本来就没有状态概念，减少多余概念的消耗，可以发挥计算最大效能。







从理论上说，函数式语言也不是通过冯诺伊曼体系结构的机器上运行的，而是通过λ演算来运行的，就是通过变量替换的方式进行，变量替换为其值或表达式，函数也替换为其表达式，并根据运算符进行计算。λ演算是图灵完全（Turing completeness）的，但是大多数情况，函数式程序还是被编译成（冯诺依曼机的）机器语言的指令执行的。


而是指数学中的函数，即自变量的映射。也就是说一个函数的值仅决定于函数参数的值，不依赖其他状态。


在函数式语言中，函数作为一等公民，可以在任何地方定义，在函数内或函数外，可以作为函数的参数和返回值，可以对函数进行组合。


纯函数式编程语言中的变量也不是命令式编程语言中的变量，即存储状态的单元，而是代数中的变量，即一个值的名称。变量的值是不可变的（immutable），也就是说不允许像命令式编程语言中那样多次给一个变量赋值。

循环 递归