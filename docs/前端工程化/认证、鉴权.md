# 登录鉴权

- SSO：单点登录	
- OAuth2：授权协议

- Session 机制
  - cookie(sessionID)-session
  - Session 的分布式问题
    - 独立的缓存服务器：共享 session
- Token 机制
  - token 使用方式
    - 存储
      - cookie
      - localstorege
    - 过期-刷新
    - 验证-防篡改：签名
  - [JWT](https://jwt.io/)
- 单点登录：一次登录，全线通用
  - 核心：单独**认证服务**（通常被称为 SSO）
  - 顶级域相同
    - cookie 顶级域共享 + 共享 session/token
  - 顶级域不同


对 session 和 token 的对比本质上是「客户端存 cookie / 存别地儿」、「服务端存数据 / 不存数据」的对比。


Cookie-session 局限性

依赖 Cookie，用户可以在浏览器端禁用 Cookie

不支持跨端兼容 app 等

业务系统不停的请求缓存服务器查找用户信息，使得内存开销增加，服务器压力过大

服务器是有状态的，如果是没有缓存服务器的方式，扩容就非常困难，需要在多台服务器中疯狂复制 sessionId

存在单点登录失败的可能性