(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{348:function(t,a,e){"use strict";e.r(a);var s=e(33),n=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"table-content"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#table-content"}},[t._v("#")]),t._v(" Table Content")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"#table-content"}},[t._v("Table Content")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#git-%E7%94%A8%E6%B3%95"}},[t._v("Git 用法")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"#%E5%BC%80%E5%A7%8B"}},[t._v("开始")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#%E9%85%8D%E7%BD%AE%E8%AE%BE%E7%BD%AE"}},[t._v("配置设置")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"}},[t._v("基本使用")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8"}},[t._v("进阶使用")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"#git-commit"}},[t._v("git commit")])])])])])]),t._v(" "),e("li",[e("a",{attrs:{href:"#git-%E5%8E%9F%E7%90%86%E6%8E%A2%E7%B4%A2"}},[t._v("Git 原理探索")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"#%E6%8E%A2%E7%B4%A2-git-%E7%9B%AE%E5%BD%95"}},[t._v("探索 .git 目录")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#committree-%E5%92%8C-blob-%E5%85%B3%E7%B3%BB"}},[t._v("commit、tree 和 blob 关系")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#%E5%88%86%E7%A6%BB%E5%A4%B4%E6%8C%87%E9%92%88"}},[t._v("分离头指针")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"}},[t._v("应用场景")])])])]),t._v(" "),e("li",[e("a",{attrs:{href:"#head-%E5%92%8C-head-%E5%8C%BA%E5%88%AB"}},[t._v("HEAD^ 和 HEAD~ 区别")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#git-%E5%B7%A5%E4%BD%9C%E6%B5%81"}},[t._v("Git 工作流")])])])]),t._v(" "),e("li",[e("a",{attrs:{href:"#gitlab"}},[t._v("GitLab")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#%E5%8F%82%E8%80%83%E5%AD%A6%E4%B9%A0"}},[t._v("参考学习")])])]),t._v(" "),e("h2",{attrs:{id:"git-用法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#git-用法"}},[t._v("#")]),t._v(" Git 用法")]),t._v(" "),e("h3",{attrs:{id:"开始"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开始"}},[t._v("#")]),t._v(" 开始")]),t._v(" "),e("p",[t._v("学习使用命令行时，最好的方式就是多用 help 命令查看其他命令的相关用法。在控制台输入 "),e("code",[t._v("git help")]),t._v(" 可查看 git 不同命令使用场景:")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://raw.githubusercontent.com/laoergege/laoergege-blog/master/images/gc.png",alt:"git 命令"}})]),t._v(" "),e("blockquote",[e("p",[e("code",[t._v("git help <command>")]),t._v(" 可查看相关命令文档，"),e("code",[t._v("git <command> -h")]),t._v(" 可在控制台直接简洁打印查看用法。")])]),t._v(" "),e("h3",{attrs:{id:"配置设置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置设置"}},[t._v("#")]),t._v(" 配置设置")]),t._v(" "),e("p",[t._v("git 使用前必须设置 git 用户信息（邮箱、用户名），主要用于记录提交得用户信息。")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('git config --list\n\ngit config --local user.username "xxx"\ngit config --local user.email "xxx"\n')])])]),e("p",[t._v("配置信息有三种不同级别，优先级分别是:"),e("br"),t._v("\nlocal > global > system")]),t._v(" "),e("h3",{attrs:{id:"基本使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基本使用"}},[t._v("#")]),t._v(" 基本使用")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('// 初始化\ngit init\n\n// 暂存文件\ngit add . // 暂存所有文件\ngit add <file> // 仅暂存对应文件\n\n// 提交版本\ngit commit -m "xxx"\n')])])]),e("h3",{attrs:{id:"进阶使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#进阶使用"}},[t._v("#")]),t._v(" 进阶使用")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("// 面向工作区 \ngit add -u // 只暂存已跟踪文件，避免把工作区没准备好的新文件直接加到暂存区了。\ngit rm <file> // 删除文件\ngit mv <source> <destination>\n\n// 面向暂存区\ngit rm --cached <file> // 取消文件暂存\ngit reset --hard <commit> // 重置工作区和暂存区\n\n// 面向储存版本\n")])])]),e("p",[e("strong",[t._v("Tip")]),t._v(":")]),t._v(" "),e("ul",[e("li",[t._v("多用 "),e("code",[t._v("git status")]),t._v(" 查看文件状态，git 会有接下来相关操作提示。")]),t._v(" "),e("li",[t._v("使用 "),e("code",[t._v("git log")]),t._v(" 和 "),e("code",[t._v("gitk")]),t._v(" 能够查看提交日志，"),e("code",[t._v("gitk")]),t._v(" 会打开图形化界面。(windows 下 gitk 界面乱码，可输入配置命令 "),e("code",[t._v("git config gui.encoding utf-8")]),t._v("，重新打开即可。)")])]),t._v(" "),e("h4",{attrs:{id:"git-commit"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#git-commit"}},[t._v("#")]),t._v(" git commit")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("git commit --amend")]),t._v(" 修改最新commit的message。会创建一个将暂存区的内容生成一个commit，再将当前最新的commit替换成新生成的那一个。")])]),t._v(" "),e("h2",{attrs:{id:"git-原理探索"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#git-原理探索"}},[t._v("#")]),t._v(" Git 原理探索")]),t._v(" "),e("h3",{attrs:{id:"探索-git-目录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#探索-git-目录"}},[t._v("#")]),t._v(" 探索 .git 目录")]),t._v(" "),e("p",[t._v("一个 "),e("code",[t._v("git init")]),t._v(" 的初始化项目，隐藏的 "),e("code",[t._v(".git")]),t._v(" 会有以下基础的目录结构:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("// power shell\n\nMode                LastWriteTime         Length Name\n----                -------------         ------ ----\nd-----        2019/7/21     23:42                hooks\nd-----        2019/7/21     23:42                info\nd-----        2019/7/21     23:42                objects\nd-----        2019/7/21     23:42                refs\n-a----        2019/7/21     23:42            130 config\n-a----        2019/7/21     23:42             73 description\n-a----        2019/7/21     23:42             23 HEAD\n")])])]),e("p",[t._v("主要核心文件和目录为:")]),t._v(" "),e("ul",[e("li",[t._v("objects: 核心目录，存放 git 核心对象。.git/objects/ 文件夹中的子文件夹都是以哈希值的前两位字符命名 每个object由40位字符组成，前两位字符用来当文件夹，后38位做文件。")]),t._v(" "),e("li",[t._v("refs: 记录各分支和标签引用")]),t._v(" "),e("li",[t._v("config: 项目 git 本地配置文件")]),t._v(" "),e("li",[t._v("HEAD: 当前的分支引用")])]),t._v(" "),e("p",[t._v("在项目根目录下新建 "),e("code",[t._v("readme")]),t._v(" 文件，并首次提交版本，然后进行以下操作步骤:")]),t._v(" "),e("blockquote",[e("p",[t._v("Tip: "),e("code",[t._v("git cat-file -t")]),t._v("  查看 git 对象的类型，"),e("code",[t._v("git cat-file -p")]),t._v("  查看 git 对象的内容")])]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("PS D:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("laoergege-demos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-demo-project"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(".git"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("                                                    \n\n    目录: D:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("laoergege-demos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-demo-project"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(".git\n\n\nMode                LastWriteTime         Length Name\n----                -------------         ------ ----\nd-----        "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("/7/22     "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(":10                hooks\nd-----        "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("/7/22     "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(":10                info\nd-----        "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("/7/22     "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(":28                logs\nd-----        "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("/7/22     "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(":28                objects\nd-----        "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("/7/22     "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(":10                refs\nd-----        "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("/7/22     "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(":22                test.txt\n-a----        "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("/7/22     "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(":28             "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v(" COMMIT_EDITMSG\n-a----        "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("/7/22     "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(":10            "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("130")]),t._v(" config\n-a----        "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("/7/22     "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(":10             "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("73")]),t._v(" description\n-a----        "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("/7/22     "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(":10             "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(" HEAD\n-a----        "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("/7/22     "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(":28            "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("137")]),t._v(" index\n\n\n******************************************************************\n* 新生成的 index 文件即为暂存区的记录\n******************************************************************\n\nPS D:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("laoergege-demos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-demo-project"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(".git"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" HEAD                                              \nref: refs/heads/master\n\n******************************************************************\n* HEAD 记录当前引用的分支\n******************************************************************\n\nPS D:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("laoergege-demos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-demo-project"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(".git"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" refs                                               \nPS D:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("laoergege-demos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-demo-project"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(".git"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("refs"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("                                               \n\n    目录: D:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("laoergege-demos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-demo-project"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(".git"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("refs\n\n\nMode                LastWriteTime         Length Name\n----                -------------         ------ ----\nd-----        "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("/7/22     "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(":28                heads\nd-----        "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("/7/22     "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(":10                tags\n\n******************************************************************\n* heads 存放文支\n* tags 存放标签\n******************************************************************\n\nPS D:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("laoergege-demos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-demo-project"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(".git"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("refs"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" heads                                         \nPS D:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("laoergege-demos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-demo-project"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(".git"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("refs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("heads"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("                                         \n\n    目录: D:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("laoergege-demos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-demo-project"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(".git"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("refs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("heads\n\n\nMode                LastWriteTime         Length Name\n----                -------------         ------ ----\n-a----        "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("/7/22     "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(":28             "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("41")]),t._v(" master\n\nPS D:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("laoergege-demos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-demo-project"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(".git"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("refs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("heads"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" master                                 \n5efd4f420e04e034a3a6335a2b48883a0554da86\n\n******************************************************************\n* 当前仅有 master 一条分支，查看内容是 "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("40")]),t._v("位哈希值字符，\n* 为 "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" object 文件命名"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("每个object由40位字符组成，前两位字符用来当文件夹，后38位做文件"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("。\n*\n* Git 核心对象类型分别为\n* - commit\n* - tree\n* - blob\n******************************************************************\n\nPS D:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("laoergege-demos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-demo-project"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(".git"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("refs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("heads"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" cat-file -t 5efd4f420e04               \ncommit\nPS D:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("laoergege-demos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-demo-project"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(".git"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("refs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("heads"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" cat-file -p 5efd4f420e04               \ntree 3712c209d65dc7167d5fdcdd7dec214bc13a953b\nauthor lianyuansheng "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("lianyuansheng@xiao100.com"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1563809286")]),t._v(" +0800\ncommitter lianyuansheng "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("lianyuansheng@xiao100.com"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1563809286")]),t._v(" +0800\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" readme.md\n\n******************************************************************\n* 每条分支实际指向的是一个 commit 对象\n* commit 对象除了记录提交信息外，还包含 tree 对象\n* tree 对象记录每次提交的文件blob及目录tree\n******************************************************************\n\nPS D:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("laoergege-demos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-demo-project"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(".git"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("refs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("heads"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" cat-file -t 3712c209d65dc716           \ntree\nPS D:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("laoergege-demos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-demo-project"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(".git"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("refs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("heads"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" cat-file -p 3712c209d65dc716           \n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("100644")]),t._v(" blob fdc3d3cd37c23aeb665aa995f395d9c6979bd508    readme.md\n\n******************************************************************\n* 该 tree 只包含文件blob 一个子节点\n* PS：本实验内容简单，可自行提交更复杂操作，查看更多内容\n******************************************************************\n\nPS D:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("laoergege-demos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-demo-project"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(".git"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("refs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("heads"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" cat-file -t fdc3d3cd37c23ae            \nblob\nPS D:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("laoergege-demos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-demo-project"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(".git"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("refs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("heads"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" cat-file -p fdc3d3cd37c23ae            \nHello Git"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n\n******************************************************************\n* Object 文件 fdc3d3cd37c23aeb665aa995f395d9c6979bd508 \n* 的内容正是刚刚我们提交的 readme.md 文件内容\n* "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" 使用内部 hash-object 命令把 readme.md 的当前内容压缩成二进制文件，\n* 存入 Git。压缩后的二进制文件，称为一个 Git 对象，保存\n* 在.git/objects目录。\n******************************************************************\n\n")])])]),e("p",[t._v("我们修改 readme.md 内容，并再次上传。")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("PS D:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("laoergege-demos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-demo-project"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" log\ncommit 5ca8479f1afc822216aebc6e9a164d5a93f4b911 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("HEAD -"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" master"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("Author: lianyuansheng "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("lianyuansheng@xiao100.com"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Date:   Tue Jul "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(":57:03 "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v(" +0800\n\n    修改 readme\ncommit 5efd4f420e04e034a3a6335a2b48883a0554da86Author: lianyuansheng "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("lianyuansheng@xiao100.com"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Date:   Mon Jul "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(":28:06 "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v(" +0800\n\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" readme.md\n\n******************************************************************\n* "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" log 查看到 5ca8479f1afc822216aebc6e9a164d5a93f4b911 即为\n* 最新的一次提交对象\n******************************************************************\n\nPS D:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("laoergege-demos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-demo-project"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" cat-file -p 5ca8479f1afc82221\ntree 6ca17ac94693a5aedc5ca0deead5ffe676e67092parent 5efd4f420e04e034a3a6335a2b48883a0554da86\nauthor lianyuansheng "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("lianyuansheng@xiao100.com"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1563854223")]),t._v(" +0800\ncommitter lianyuansheng "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("lianyuansheng@xiao100.com"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1563854223")]),t._v(" +0800\n修改 readme\n\nPS D:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("laoergege-demos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-demo-project"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" cat-file -p 6ca17ac94693a5aedc\n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("100644")]),t._v(" blob e1bfe2cd62deac1ff0fa1ab584d4354ec30b5144    readme.md\nPS D:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("laoergege-demos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-demo-project"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" cat-file -p e1bfe2cd62deac1ff0\nHello Git"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("123456")]),t._v("\n\n******************************************************************\n* 通过层层查看，我们发现hash值为e1bfe2cd62deac1ff0fa1ab584d4354ec30b5144\n* 的 Object 对象文件（不是原来的 fdc3d3cd37c23aeb665aa995f395d9c6979bd508）\n* 内容即为我们刚刚改写的文件内容。git 会在每次 "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" \n* 操作时对每次修改的文件（或者新文件），使用 hash-object 命令对这些文件\n* 重新生成新的 Object 文件存储，这就是 "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" 和其他版本控制系统的主要差别:\n* 即重新生成快照，而非差异比较。\n******************************************************************\n\n")])])]),e("p",[t._v("当我们在使用 "),e("code",[t._v("git add")]),t._v("、"),e("code",[t._v("git commit")]),t._v(" 等高级命令时，git 实际在调用其底层相关命令。")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://raw.githubusercontent.com/laoergege/laoergege-blog/master/images/20190723113201.png",alt:"git 命令"}})]),t._v(" "),e("p",[t._v("可参考阮一峰的 "),e("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2018/10/git-internals.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Git 原理入门"),e("OutboundLink")],1),t._v("，去尝试使用下底层相关命令。")]),t._v(" "),e("h3",{attrs:{id:"commit、tree-和-blob-关系"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#commit、tree-和-blob-关系"}},[t._v("#")]),t._v(" commit、tree 和 blob 关系")]),t._v(" "),e("p",[t._v("在上面操作过程中，我们可能发现一种关系：commit 包含 tree，tree 包含 blob。我们再添加新的文件夹src，里面再加入 index.html 文件然后提交。")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("PS D:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("laoergege-demos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-demo-project"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" log\ncommit 9eafc20aba47c34295ba9e77984c08b9003a911d "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("HEAD -"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" master"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nAuthor: lianyuansheng "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("lianyuansheng@xiao100.com"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nDate:   Tue Jul "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(":42:40 "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v(" +0800\n\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" src/index.html\n\ncommit 5ca8479f1afc822216aebc6e9a164d5a93f4b911\nAuthor: lianyuansheng "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("lianyuansheng@xiao100.com"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nDate:   Tue Jul "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(":57:03 "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v(" +0800\n\n    修改 readme\n\ncommit 5efd4f420e04e034a3a6335a2b48883a0554da86\nAuthor: lianyuansheng "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("lianyuansheng@xiao100.com"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nDate:   Mon Jul "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(":28:06 "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v(" +0800\n\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" readme.md\nPS D:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("laoergege-demos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-demo-project"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" cat-file -p 9eafc20aba47c\ntree fb4ffaecbfaddbd6296331a1da949cecec619e69\nparent 5ca8479f1afc822216aebc6e9a164d5a93f4b911\nauthor lianyuansheng "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("lianyuansheng@xiao100.com"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1563896560")]),t._v(" +0800\ncommitter lianyuansheng "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("lianyuansheng@xiao100.com"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1563896560")]),t._v(" +0800\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" src/index.html\nPS D:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("laoergege-demos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-demo-project"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" cat-file -p fb4ffaecbfadd\n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("100644")]),t._v(" blob e1bfe2cd62deac1ff0fa1ab584d4354ec30b5144    readme.md\n040000 tree 8251a50aff5d385ceb293feb338725de7a80a7f4    src\nPS D:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("laoergege-demos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-demo-project"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" cat-file -p 8251a50aff5d3\n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("100644")]),t._v(" blob e4fd797cd4752a6d66a59a7e89ae76798b460d1b    index.html\nPS D:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("laoergege-demos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-demo-project"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" cat-file -p e1bfe2cd62deac\nHello Git"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("123456")]),t._v("              \n")])])]),e("p",[t._v("通过 commit 对象信息，找到 tree，通过查看 tree，发现了新的子 tree 和原来 blob（readme.md）,再通过子 tree 发现了新添加的 index.html 文件转存的 blob，整体关系图如下：")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://raw.githubusercontent.com/laoergege/laoergege-blog/master/images/20190726090455.png",alt:""}})]),t._v(" "),e("p",[t._v("提交时，Git 创建的 Commit 对象，除了包含相关提交信息以外，还包含着指向这个树对象（项目根目录）的指针，Tree 相当于一次提交的文件目录快照，Blob 叶子节点对应则是文件。")]),t._v(" "),e("p",[t._v("提交时，Git底层的运行流程大概为：当我们添加或者修改了文件并且 add 到 Stage Area 之后，首先会根据文件内容创建不同的blob，当进行提交之后马上创建一个 tree 组件把需要的 blob 组件添加进去，之后再封装到一个 commit 组件中完成本次提交。对于内容相同的文件只会存一个 blob ，不同的 commit 的区别是 commit、tree 和有差异的 blob，多数未变更的文件对应的 blob 都是相同的，这么设计对于版本管理系统来说可以省很多存储空间。其次，随着 blob 文件的增多，git 还会做 pack 整理。使用增量存储的机制，把内容相近的blob做增量存储。")]),t._v(" "),e("h3",{attrs:{id:"分离头指针"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#分离头指针"}},[t._v("#")]),t._v(" 分离头指针")]),t._v(" "),e("p",[t._v("分离头指针，即 HEAD 指针没有跟分支进行挂钩。在此 HEAD 上产生的 commit 由于没有跟 "),e("code",[t._v("branch")]),t._v(" 和 "),e("code",[t._v("tag")]),t._v(" 挂钩，在 git 眼里，这种 commit 日后都是要被清除的。")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("\ngit checkout <commitID> // 切换到指定版本，会产生分离头指针情况\n\n// 正常情况，HEAD -> master 绑定在一起\nPS D:\\laoergege-demos\\git-demo-project> git log\ncommit d2da0155cc7eee411ebece9aa1021c1ce7bc41d4 (HEAD -> master)\nAuthor: lianyuansheng <lianyuansheng@xiao100.com>\nDate:   Mon Aug 12 22:21:45 2019 +0800\n\n    修改 readme\n...\n\n\n// 分离头指针，此时 HEAD 指针与 master 分开\nPS D:\\laoergege-demos\\git-demo-project> git branch -av\n* (HEAD detached at 022a40a) 022a40a 修改 index.html\n  master                     d2da015 修改 readme\n\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("PS D:\\laoergege-demos\\git-demo-project> git merge 022a40a850\nMerge made by the 'recursive' strategy.\n src/index.html | 1 +\n 1 file changed, 1 insertion(+)\n")])])]),e("p",[t._v("进一步操作发现，当切换 master 分支并 merge 刚刚分离头指针提交的版本时，"),e("strong",[t._v("我们始终在 git commit 树上工作，无论我们 "),e("code",[t._v("git merge <commitID> | <branch> | <HEAD>")]),t._v("，所有本质都是操作到对应的 commitID 节点")]),t._v("。")]),t._v(" "),e("h4",{attrs:{id:"应用场景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#应用场景"}},[t._v("#")]),t._v(" 应用场景")]),t._v(" "),e("p",[t._v("那么 "),e("code",[t._v("git checkout commitId")]),t._v(" 会出现分离头指针的情况，这种情况下比较危险，因为这个时候你提交的代码没有和分支对应起来，当切换到其他分支的时候(比如master分支)，容易丢失代码。")]),t._v(" "),e("p",[t._v("但是分离头指针也有它的应用场景，就是在自己做尝试或者测试的时候可以分离头指针，当尝试完毕没有用的时候可以随时丢弃，但是如果觉得尝试有用，那么可以新建一个分支，使用 "),e("code",[t._v("git branch <新分支的名称> commitId")])]),t._v(" "),e("h3",{attrs:{id:"head-和-head-区别"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#head-和-head-区别"}},[t._v("#")]),t._v(" HEAD^ 和 HEAD~ 区别")]),t._v(" "),e("p",[t._v("一个节点可由多个父节点 merge 而来。")]),t._v(" "),e("ul",[e("li",[t._v("HEAD^n 第几个父节点")]),t._v(" "),e("li",[t._v("HEAD~n 第前几代父节点（类似树的层级关系）")])]),t._v(" "),e("p",[t._v("可组合使用，比如 "),e("code",[t._v("HEAD^2~2")]),t._v("：第前二代第2个父节点。")]),t._v(" "),e("h3",{attrs:{id:"git-工作流"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#git-工作流"}},[t._v("#")]),t._v(" Git 工作流")]),t._v(" "),e("h2",{attrs:{id:"gitlab"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#gitlab"}},[t._v("#")]),t._v(" GitLab")]),t._v(" "),e("h2",{attrs:{id:"参考学习"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考学习"}},[t._v("#")]),t._v(" 参考学习")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://git-scm.com/book/zh/v2",target:"_blank",rel:"noopener noreferrer"}},[t._v("git book 中文版"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://backlog.com/git-tutorial/cn/reference/",target:"_blank",rel:"noopener noreferrer"}},[t._v("猴子都能懂的GIT入门"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=n.exports}}]);