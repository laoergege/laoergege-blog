---
release: true
tags:
 - rust
---

# Rust

- Rust
  - è®¾è®¡ç†å¿µ
    - æ€§èƒ½ã€å†…å­˜å®‰å…¨ã€å¹¶å‘å®‰å…¨
    - åˆ’åˆ† Safe rust å’Œ Unsafe Rustï¼ˆæ–¹ä¾¿ä¸å…¶ä»–è¯­è¨€æ²Ÿé€šï¼‰
    - å¤šèŒƒå¼ç¼–ç¨‹
  - è¯­æ³•ç‰¹æ€§
    - [å†…å­˜å®‰å…¨ï¼šæ‰€æœ‰æƒã€å€Ÿç”¨åŠç”Ÿå‘½å‘¨æœŸ](./å†…å­˜å®‰å…¨ï¼šæ‰€æœ‰æƒã€å€Ÿç”¨åŠç”Ÿå‘½å‘¨æœŸ.md)
    - é¢å‘è¡¨è¾¾å¼
      - ä¸€åˆ‡çš†æ˜¯è¡¨è¾¾å¼ï¼Œå³ä¸€åˆ‡çš†ç±»å‹ï¼ˆè¡¨è¾¾å¼ä¼šäº§ç”Ÿå€¼ï¼Œå€¼å³ç±»å‹ï¼Œrust å°±æ˜¯é€šè¿‡ä¸€åˆ‡ç±»å‹æ£€æŸ¥ä¿è¯å†…å­˜å®‰å…¨ã€å¹¶å‘å®‰å…¨ï¼‰
        - æ§åˆ¶æµè¯­å¥
        - å‡½æ•°
      - ç¼–è¯‘æœŸè®¡ç®—
  - ç¼–ç¨‹åŸºç¡€
    - å˜é‡ã€å€¼å’Œç±»å‹
    - è¡¨è¾¾å¼ä¸è¿ç®—ç¬¦
    - æ§åˆ¶æµ
      - é¡ºåº
      - è°ƒç”¨
      - å¾ªç¯ï¼š`loop / while(æ¡ä»¶) / for...in(è¿­ä»£å™¨)` + `break / continue / return`
      - è·³è½¬
        - åˆ†æ”¯è·³è½¬ `if ... else ...`
        - æ¨¡å¼åŒ¹é…
          - `match expr {}`
          - `if let / while let`
        - [é”™è¯¯å¤„ç†](./Rust%20é”™è¯¯å¤„ç†.md)
        - å¼‚æ­¥è·³è½¬
    - å‡½æ•° `fn`
    - æ¨¡å—ç³»ç»Ÿï¼šç®±ã€æ¨¡å—ã€è·¯å¾„
      - ç®± crateï¼šä¸€ä¸ªé¡¹ç›®ä¹Ÿè¢«ç§°ä¸ºä¸€ä¸ª crateï¼Œcrate å¯ä»¥æ˜¯å¯æ‰§è¡Œé¡¹ç›®ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªåº“
      - æ¨¡å— `mod`ï¼šæ¨¡å—æ˜¯ä¸€ä¸ªç®±å†…çš„ä»£ç ç»„ç»‡å•ä½ï¼Œåœ¨ Rust ä¸­å£°æ˜æ¨¡å—çš„æ–¹å¼æœ‰ä¸¤ç§ï¼šå†…è”æˆ–åœ¨å…¶ä»–æ–‡ä»¶ä¸­å£°æ˜
      - `pub`ï¼šå¯¼å‡º
      - `use`ï¼šå¯¼å…¥
    - æ•°æ®ç»“æ„
      - æ•°ç»„
      - çŸ¢é‡ `Vec`
      - å“ˆå¸Œ `HashMap`
    - æµ‹è¯•
      - å•å…ƒæµ‹è¯•
        - `#[test]`
        - `#[should_panic]` é¢„æœŸçš„å¤±è´¥
        - `#[ignore]` å¿½ç•¥æµ‹è¯•
      - æ–‡æ¡£æµ‹è¯• `///`
      - é›†æˆæµ‹è¯•
  - è¿›é˜¶
    - ç±»å‹ç³»ç»Ÿ 
      - ç±»å‹æ˜¯å¯¹å€¼çš„åŒºåˆ†ï¼Œå®ƒåŒ…å«äº†å€¼åœ¨å†…å­˜ä¸­çš„é•¿åº¦ã€å¯¹é½ä»¥åŠå€¼å¯ä»¥è¿›è¡Œçš„æ“ä½œç­‰ä¿¡æ¯ï¼›å€¼æ˜¯æ— æ³•è„±ç¦»å…·ä½“çš„ç±»å‹è®¨è®ºçš„
      - å†…å­˜åˆ†é…
        - å‡†åˆ™ï¼šæ ˆä¸Šå­˜æ”¾çš„æ•°æ®æ˜¯é™æ€çš„ï¼Œå›ºå®šå¤§å°ï¼Œå›ºå®šç”Ÿå‘½å‘¨æœŸï¼›å †ä¸Šå­˜æ”¾çš„æ•°æ®æ˜¯åŠ¨æ€çš„ï¼Œä¸å›ºå®šå¤§å°ï¼Œä¸å›ºå®šç”Ÿå‘½å‘¨æœŸ
      - åˆ†ç±»
        - åŸç”Ÿç±»å‹
        - ç»„åˆç±»å‹/å¤åˆç±»å‹
          - ç»“æ„ä½“ï¼ˆstructï¼‰ï¼šå¤šä¸ªç±»å‹ç»„åˆåœ¨ä¸€èµ·å…±åŒè¡¨è¾¾ä¸€ä¸ªå€¼çš„å¤æ‚æ•°æ®ç»“æ„
            - ç»å…¸ç»“æ„ä½“
            - å…ƒç»„
            - å•å…ƒç»“æ„
          - æšä¸¾ï¼ˆenumï¼‰ï¼šè”åˆæ ‡ç­¾
      - æŒ‡é’ˆå’Œå¼•ç”¨
        - æŒ‡é’ˆæ˜¯ä¸€ä¸ªæŒæœ‰å†…å­˜åœ°å€çš„å€¼ï¼Œå¯ä»¥é€šè¿‡è§£å¼•ç”¨ï¼ˆdereferenceï¼‰æ¥è®¿é—®å®ƒæŒ‡å‘çš„å†…å­˜åœ°å€ï¼Œç†è®ºä¸Šå¯ä»¥è§£å¼•ç”¨åˆ°ä»»æ„æ•°æ®ç±»å‹ï¼Œä½†å¦‚æœæ²¡æœ‰ç”¨æ­£ç¡®çš„ç±»å‹è§£å¼•ç”¨ä¸€ä¸ªæŒ‡é’ˆï¼Œé‚£ä¹ˆä¼šå¼•å‘å„ç§å„æ ·çš„å†…å­˜é—®é¢˜
        - å¼•ç”¨çš„è§£å¼•ç”¨è®¿é—®æ˜¯å—é™çš„ï¼Œå®ƒåªèƒ½è§£å¼•ç”¨åˆ°å®ƒå¼•ç”¨æ•°æ®çš„ç±»å‹ï¼Œä¸èƒ½ç”¨ä½œå®ƒç”¨
        - å¼•ç”¨çš„å®ç°ä¸Šæ¯”æ­£å¸¸æŒ‡é’ˆæºå¸¦æ›´å¤šä¿¡æ¯çš„æŒ‡é’ˆï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºèƒ–æŒ‡é’ˆï¼ˆfat pointerï¼‰ï¼Œå¾ˆå¤šæ•°æ®ç»“æ„çš„å¼•ç”¨ï¼Œå†…éƒ¨éƒ½æ˜¯ç”±èƒ–æŒ‡é’ˆå®ç°çš„
    - æ³›å‹
      - æ•°æ®ç»“æ„çš„æ³›å‹
      - ä½¿ç”¨æ³›å‹ç»“æ„ä»£ç çš„æ³›å‹åŒ–
    - é¢å‘æ¥å£ç¼–ç¨‹
      - æ¥å£å°†è°ƒç”¨è€…å’Œå®ç°è€…éš”ç¦»å¼€ï¼Œå¤§å¤§ä¿ƒè¿›äº†ä»£ç çš„å¤ç”¨å’Œæ‰©å±•ã€‚é¢å‘æ¥å£ç¼–ç¨‹å¯ä»¥è®©ç³»ç»Ÿå˜å¾—çµæ´»ï¼Œä½†æ˜¯å½“ä½¿ç”¨æ¥å£å»å¼•ç”¨å…·ä½“çš„ç±»å‹æ—¶ï¼Œåœ¨è¿è¡Œæ—¶å˜é‡åŸæœ¬çš„ç±»å‹è¢«æŠ¹å»ï¼Œæˆ‘ä»¬æ— æ³•å•çº¯ä»ä¸€ä¸ªæŒ‡é’ˆåˆ†æå‡ºè¿™ä¸ªå¼•ç”¨å…·å¤‡ä»€ä¹ˆæ ·çš„èƒ½åŠ›ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦è™šè¡¨æ¥è¾…åŠ©è¿è¡Œæ—¶ä»£ç çš„æ‰§è¡Œã€‚æœ‰äº†è™šè¡¨ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°è¿›è¡ŒåŠ¨æ€åˆ†æ´¾ï¼Œå®ƒæ˜¯è¿è¡Œæ—¶å¤šæ€çš„åŸºç¡€ã€‚
      - Trait
    - å‡½æ•°å¼ç¼–ç¨‹
      - å‡½æ•°å¾€å¾€æ˜¯ä¸€ç­‰å…¬æ°‘
      - é—­åŒ…æ˜¯å°†å‡½æ•°ï¼Œæˆ–è€…è¯´ä»£ç å’Œå…¶ç¯å¢ƒä¸€èµ·å­˜å‚¨çš„ä¸€ç§æ•°æ®ç»“æ„ã€‚é—­åŒ…å¼•ç”¨çš„ä¸Šä¸‹æ–‡ä¸­çš„è‡ªç”±å˜é‡ï¼Œä¼šè¢«æ•è·åˆ°é—­åŒ…çš„ç»“æ„ä¸­ï¼Œæˆä¸ºé—­åŒ…ç±»å‹çš„ä¸€éƒ¨åˆ†ã€‚
    - å¹¶å‘ç¼–ç¨‹
      - å¹¶å‘æ˜¯ç³»ç»Ÿæ‹¥æœ‰åŒæ—¶ä¸å¤šä»¶äº‹æƒ…æ‰“äº¤é“çš„èƒ½åŠ›ï¼›å¹¶è¡Œæ˜¯åŒæ—¶å¤„ç†å¤šä»¶äº‹æƒ…çš„æ‰‹æ®µ  ![å›¾ 17](images/1653375009755.png)  
      - å¼‚æ­¥ç¼–ç¨‹
    - å®ç¼–ç¨‹
      - å£°æ˜å®
      - è¿‡ç¨‹å®
        - å‡½æ•°å®
        - æ´¾ç”Ÿå®
        - å±æ€§å®
    - é¢å‘å¯¹è±¡ç¼–ç¨‹
  - å®ç°
    - åŸºäº LLVMï¼Œå…·æœ‰å¯ç§»æ¤æ€§
  - å·¥ç¨‹åŒ–
    - å·¥å…·é“¾
      - rustupï¼šå·¥å…·é“¾ç®¡ç†å·¥å…·
        - rust-toolchain.toml
      - rustcï¼šrust ç¼–è¯‘å™¨
        - æ”¯æŒç±»å‹æ¨å¯¼ï¼Œä½¿å¾—å†™ä»£ç æ—¶çš„ç›´è§‚æ„Ÿå—å’Œå†™è„šæœ¬è¯­è¨€å·®ä¸å¤šğŸ‘
      - [cargoï¼šåŒ…ç®¡ç†å·¥å…·](#cargoåŒ…ç®¡ç†å·¥å…·)
  - ç”Ÿæ€
    - WSAI
  - èµ„æ–™
    - [x] [Microsoft Rust æ•™ç¨‹](https://docs.microsoft.com/zh-cn/learn/paths/rust-first-steps/)
    - [ ] [Rust ç¨‹åºè®¾è®¡è¯­è¨€](https://kaisery.github.io/trpl-zh-cn/title-page.html)
    - [ ] [Rustè¯­è¨€åœ£ç»(Rust Course)](https://course.rs/about-book.html)
    - [ ] [rust-training](https://github.com/tyrchen/rust-training)
    - [ ] [rust-learning](https://github.com/ctjhoa/rust-learning)
    - [ ] [awesome-rust](https://github.com/rust-unofficial/awesome-rust)
    - [ ] [ Asynchronous Programming in Rust](https://rust-lang.github.io/async-book/03_async_await/01_chapter.html)

## rust ç¨‹åºéª¨æ¶

- åˆ†å‰²ç¬¦
  - å±æ€§ï¼Œ`#![...]`
  - åˆ†å·ï¼Œ`;`ï¼Œè¡Œåˆ†éš”ç¬¦
  - èŠ±æ‹¬å·ï¼Œ`{}`ï¼Œå—åˆ†éš”ç¬¦
- è¡¨è¾¾å¼å’Œè¯­å¥
  - è¡¨è¾¾å¼ï¼šè®¡ç®—æ±‚å€¼
  - è¯­å¥ï¼šæ“ä½œ
  - ç¨‹åºï¼šè¯­å¥é›†åˆ
  - è¯­å¥
    - å£°æ˜è¯­å¥
    - è¡¨è¾¾å¼è¯­å¥
- é¢å‘è¡¨è¾¾å¼
  - åˆ†å·ä¹Ÿæ˜¯ä¸€ç§è¡¨è¾¾å¼ï¼Œ`; -> ()`ï¼Œè¿”å›å•å…ƒç±»å‹ï¼Œå¹³å¸¸åªåšåˆ†éš”ç¬¦ï¼Œåœ¨å—æœ€åå¯åšè¡¨è¾¾å¼
  - å—è¡¨è¾¾å¼ä¼šå¯¹æœ€åè¡¨è¾¾å¼æ±‚å€¼å¹¶è¿”å›

## cargoï¼šåŒ…ç®¡ç†å·¥å…·

- cargo
  - æ¦‚å¿µ
    - workspaceï¼šå¤šé¡¹ç›®ç»„ç»‡
  - é…ç½®ï¼šCargo.toml
  - å‘½ä»¤
    - cargo new --bin/lib
    - cargo build [--release]
    - cargo test

### cargo workspace

[cargo workspaces](https://kaisery.github.io/trpl-zh-cn/ch14-03-cargo-workspaces.html)

```toml
[workspace]

members = [
    ...
]
```

