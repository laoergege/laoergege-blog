---
release: true
top: 3
tags:
 - javascript
 - å¼‚æ­¥
 - ç¼–ç¨‹è¯­è¨€
---

# JavaScript å¼‚æ­¥ç¼–ç¨‹

- JavaScript å¼‚æ­¥ç¼–ç¨‹
  - [å¼‚æ­¥ç¼–ç¨‹](#ä½•ä¸ºå¼‚æ­¥ç¼–ç¨‹)
  - JavaScript çš„æ‰§è¡Œç¯å¢ƒï¼šäº‹ä»¶å¾ªç¯ä¸æ¶ˆæ¯é˜Ÿåˆ—
  - JavaScript å¼‚æ­¥ç¼–ç¨‹èŒƒå¼
    - å¼‚æ­¥å›è°ƒ
    - å‘å¸ƒè®¢é˜…æ¨¡å¼
    - Promise
    - å‡½æ•°å“åº”å¼ç¼–ç¨‹
    - Generator & co
    - Async/Await

## ä½•ä¸ºå¼‚æ­¥ç¼–ç¨‹

åŒæ­¥/å¼‚æ­¥æ˜¯ä¸€ç§æœ¯è¯­åœ¨ä¸åŒåœºæ™¯ä¸‹æœ‰ä¸åŒå±‚é¢çš„æ„æ€ã€‚ä¸ªäººè§‰å¾—æ¯”è¾ƒå¹¿ä¹‰çš„è¯´æ³•ï¼ŒåŒæ­¥/å¼‚æ­¥å…³æ³¨çš„æ˜¯äº‹ç‰©ä¹‹é—´çš„è¡Œä¸ºæ¨¡å¼ã€åä½œå…³ç³»ï¼šä¸€ä¸ªäº‹ç‰©çš„å‘ç”Ÿå¿…é¡»ç­‰å¾…å¦ä¸€äº‹ç‰©çš„ç»“æœï¼Œè¿™å°±æ˜¯åŒæ­¥ï¼Œåä¹‹äº¦æ˜¯å¼‚æ­¥ï¼Œè¯´æ˜äº‹ç‰©ä¹‹é—´æ²¡æœ‰å› æœé¡ºåºå…³ç³»ï¼Œæ˜¯ç‹¬ç«‹æ€§çš„ã€‚

åœ¨ç¼–ç¨‹è¯­è¨€ä¸­ï¼ŒåŒæ­¥ç¼–ç¨‹æ„å‘³ç€ä»»åŠ¡çš„æ‰§è¡Œæµç¨‹è·Ÿä»£ç çš„ç¼–å†™ã€è°ƒç”¨é¡ºåºæ˜¯ä¸€æ ·çš„ï¼Œè€Œå¼‚æ­¥ç¼–ç¨‹æ¨¡å‹ä¸­ï¼Œä»£ç æ›´å¤šæ˜¯è¢«ç»„ç»‡æˆä¸ºäº†å¼‚æ­¥ä»»åŠ¡å•å…ƒï¼Œä»»åŠ¡çš„å‘ç”Ÿã€æ‰§è¡Œé¡ºåºä¸å†åƒåŒæ­¥ç¼–ç¨‹é‚£æ ·ç›´è§‚ã€å¯é¢„æµ‹ï¼Œå› ä¸ºä»–ä»¬ä¹‹é—´æ²¡æœ‰æ˜ç¡®çš„æ—¶åºå…³ç³»ï¼Œç»Ÿä¸€ç”±å¼‚æ­¥è¿è¡Œæ—¶å¹¶å‘è°ƒåº¦ã€‚

> ğŸ’¡ å¹¶å‘æ˜¯ç³»ç»Ÿæ‹¥æœ‰åŒæ—¶ä¸å¤šä»¶äº‹æƒ…æ‰“äº¤é“çš„èƒ½åŠ›ï¼›å¹¶è¡Œæ˜¯åŒæ—¶å¤„ç†å¤šä»¶äº‹æƒ…çš„æ‰‹æ®µï¼›å¹¶è¡Œæ˜¯å¹¶å‘çš„å­é›† 

ç¼–ç¨‹è¯­è¨€çš„å¼‚æ­¥ä½“ç³»æ„æˆï¼š
- ç¡¬ä»¶å±‚
- æ“ä½œç³»ç»Ÿ
- å¹¶å‘æ¨¡å‹

ç¡¬ä»¶å±‚ï¼šæˆ‘ä»¬ä¸–ç•Œçš„äº‹ç‰©æ˜¯åœ¨å¹¶å‘å‘ç”Ÿçš„ï¼Œè®¡ç®—æœºçš„å†…éƒ¨ç¡¬ä»¶åŒæ ·å¦‚æ­¤ã€‚æ¯”å¦‚å¤šä¸ª CPU å¯ä»¥å¹¶è¡Œå·¥ä½œï¼›CPU å¯ä»¥ä¸ IO è®¾å¤‡å¼‚æ­¥è¿›è¡Œï¼ŒIO è®¾å¤‡é€šè¿‡ DMA æ–¹å¼ç›´æ¥ä¸å†…å­˜æ‰“äº¤é“ï¼Œç„¶åé€šè¿‡ä¸­æ–­ä¿¡å·åé€šçŸ¥ CPU å†æ¥è¯»å–ç›¸åº”çš„è®¾å¤‡ç¼“å†²åŒºã€‚

æ“ä½œç³»ç»Ÿï¼šå¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€éƒ½æ˜¯åŒæ­¥æ¨¡å‹ï¼Œä½†å®é™…ä¸Šæˆ‘ä»¬çš„ç¨‹åºåœ¨è®¡ç®—æœºå†…éƒ¨å´æ˜¯å¹¶å‘æ‰§è¡Œçš„ï¼Œæ“ä½œç³»ç»Ÿä»¥çº¿ç¨‹ä½œä¸ºæœ€å°è°ƒåº¦æ‰§è¡Œå•ä½å¹¶ä¸”åˆ†æ—¶è°ƒåº¦æˆ‘ä»¬çš„ä»£ç ï¼ˆæ“ä½œç³»ç»Ÿä¼šä¿å­˜ä¸Šä¸‹æ–‡åŠæ‰§è¡Œä½ç½®ä»¥ä¾¿æ¢å¤åŸæ¥æ‰§è¡Œï¼‰ï¼Œè¿™å¯¹äºå¼€å‘è€…æ¥è¯´æ˜¯æ— æ„Ÿçš„ï¼Œå¹¶ä¸”æ“ä½œç³»ç»Ÿè¿˜å¸®æˆ‘ä»¬å±è”½ç¡¬ä»¶å±‚é¢çš„å¼‚æ­¥ï¼Œï¼ˆä¸»è¦ï¼‰æä¾›äº†é˜»å¡çš„ç³»ç»Ÿè°ƒç”¨ï¼Œè¿™æ ·çš„ä¸€åˆ‡ä½¿å¾—æˆ‘ä»¬ç¨‹åºè¡¨ç°å‡ºä¸€ç§åŒæ­¥æ‰§è¡Œæ•ˆæœã€‚

å¹¶å‘æ¨¡å‹ï¼šä¸ºäº†ä¿è¯å¹¶å‘ç³»ç»Ÿè®¾è®¡çš„æ­£ç¡®æ€§äººä»¬è¯•å›¾é€šè¿‡å½¢å¼åŒ–çš„æ¨¡å‹æ¥è§„èŒƒå®ƒï¼Œå¹¶å‘æ¨¡å‹ä¸»è¦åˆ†ä¸º**çº¿ç¨‹æ¨¡å‹**å’Œ**å¼‚æ­¥æ¨¡å‹ï¼ˆäº‹ä»¶é©±åŠ¨ï¼‰**ï¼Œä»ç†è®ºä¸Šè¯´ï¼Œæœ¬è´¨ä¸Šä¸¤è€…æ˜¯ç­‰ä»·çš„ï¼Œå®ƒä»¬éƒ½æ˜¯è°ƒåº¦ä»£ç æ‰§è¡Œçš„æ‰‹æ®µï¼Œæˆ–è€…è¯´åœ¨è®¡ç®—æœºé‡Œæ¨¡æ‹Ÿå¹¶å‘æ€§çš„æ‰‹æ®µã€‚åŒºåˆ«ï¼š
- çº¿ç¨‹é€‚åˆå¤„ç†äº‹åŠ¡ä¹‹é—´æœ‰ç€æ˜æ˜¾å› æœå…³ç³»æˆ–è€…ç›¸å…³æ€§å¾ˆå¼ºçš„åœºåˆï¼Œäº‹ä»¶é©±åŠ¨æœºåˆ¶ä¼šæŠŠä»£ç æçš„æ”¯ç¦»ç ´ç¢
- äº‹ä»¶é©±åŠ¨æ¯”è¾ƒæ“…é•¿å¤„ç†å¼‚æ­¥äº‹ä»¶çš„é—®é¢˜ï¼Œä½†å½“éœ€è¦å¤„ç†è·¨äº‹ä»¶çš„äº‹åŠ¡é€»è¾‘æ—¶ï¼Œäº‹ä»¶é©±åŠ¨éƒ½ä¼šå˜å¾—å¤æ‚éš¾è§£ï¼›äº‹åŠ¡é©±åŠ¨æœ‰ä¸€ç‚¹ä¼˜åŠ¿çš„åœ°æ–¹ï¼Œå°±æ˜¯å®ƒä¸ç”Ÿä¿±æ¥çš„å¹¶å‘æ€§å’Œçµæ´»æ€§
- çº¿ç¨‹æ˜¯åˆ†æ—¶è°ƒåº¦æˆ–æŠ¢å å¼è°ƒåº¦æœºåˆ¶ï¼›è€Œäº‹ä»¶é©±åŠ¨æœºåˆ¶åˆ™é‡‡ç”¨å•çº¿ç¨‹äº‹ä»¶å¾ªç¯ã€åç¨‹è¿™æ ·ä¸€ç§åä½œå¼çš„è°ƒåº¦æœºåˆ¶
- ä½¿ç”¨åä½œå¼å¤šä»»åŠ¡å¤„ç†çš„åº”ç”¨ç¨‹åºçš„ç¼–ç¨‹éš¾ç‚¹åœ¨äºï¼Œåˆ‡æ¢å¤„ç†ï¼Œä¿æŒä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œè¿™äº›èŒè´£éƒ½è½åœ¨äº†å¯æ€œçš„å¼€å‘è€…è‚©ä¸Šäº†æˆ–è€…ç”±ç¼–ç¨‹è¯­è¨€å»å®ç°å¼‚æ­¥è¿è¡Œæ—¶å’Œç¼–ç¨‹èŒƒå¼ï¼›è€Œçº¿ç¨‹æ¨¡å‹åˆ™ç”±æ“ä½œç³»ç»Ÿè‡ªå¸¦

é‚£ä¹ˆå¼‚æ­¥ç¼–ç¨‹ç›¸æ¯”åŒæ­¥ç¼–ç¨‹ç©¶ç«Ÿæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹å¯ä»¥æé«˜ç³»ç»Ÿçš„å¹¶å‘æ€§ï¼Œç›¸å½“äºæé«˜ç³»ç»Ÿçš„å“åº”æ€§å’Œèµ„æºåˆ©ç”¨ç‡ã€‚

ä»»åŠ¡ä¸€èˆ¬åˆ†ä¸º IO å¯†é›†å‹å’Œ CPU å¯†é›†å‹ã€‚è€Œ web é¢†åŸŸæ˜¯ä¸€ä¸ª IO å¯†é›†çš„åœºæ™¯ï¼šä¸»æµçš„å¤šçº¿ç¨‹å¹¶å‘æ–¹æ¡ˆä¸ä»…è¦é¢å¯¹ç«äº‰æ¡ä»¶ã€æ­»é”ç­‰ç¼–ç¨‹é—®é¢˜ï¼Œæ›´é‡è¦çš„æ˜¯ç»å¤§éƒ¨åˆ†çº¿ç¨‹éƒ½å¤„åœ¨ç­‰å¾…ç½‘ç»œå“åº”æˆ–è€…ç­‰å¾…ç£ç›˜è¯»å–ä¸­ï¼ŒCPU çš„åˆ©ç”¨ç‡ä¾ç„¶å¾ˆä½ï¼Œè€Œä¸”å¤§éƒ¨åˆ† CPU éƒ½è€—åœ¨æ“ä½œç³»ç»Ÿçš„çº¿ç¨‹è°ƒåº¦ä¸Šäº†ï¼›è€Œä¸”çº¿ç¨‹ä¹Ÿæ˜¯èµ„æºï¼Œå®ƒä»¬ä¸æ˜¯å…è´¹çš„ï¼Œç³»ç»Ÿæœ‰æ•°é‡é™åˆ¶ã€‚

**å¼‚æ­¥ç¼–ç¨‹ä¸»è¦æ˜¯è§£å†³ CPU ä¸Šä¸‹æ–‡åˆ‡æ¢æ¶ˆè€—é—®é¢˜ï¼Œæé«˜ CPU åˆ©ç”¨ç‡**ã€‚  

**å¼‚æ­¥ç¼–ç¨‹æœ¬è´¨ä¸Šæ˜¯å¸¦æœ‰ç”¨æˆ·ç©ºé—´çº¿ç¨‹çš„åä½œå¼å¤šä»»åŠ¡å¤„ç†æœºåˆ¶**ï¼Œåº”ç”¨ç¨‹åºåœ¨ç”¨æˆ·ç©ºé—´ä¸­ç®¡ç†"çº¿ç¨‹"å’Œä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œç”±ç”¨æˆ·ç¨‹åºè‡ªè¡Œä»»åŠ¡è°ƒåº¦é¿å…äº†**é˜»å¡åŸæ¥çº¿ç¨‹ï¼ŒCPU åœ¨çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢æ¶ˆè€—**ã€‚

> åä½œå¼çš„æ ¸å¿ƒæ˜¯â€œä¸»åŠ¨â€åè°ƒï¼šæˆ‘ä¸æ”¾å¼ƒæ‰§è¡Œæƒï¼Œä»»ä½•äººä¸èƒ½å¼ºåˆ¶æˆ‘ä¼‘çœ ï¼›æˆ‘åšå®Œäº†è‡ªå·±çš„å·¥ä½œï¼Œé‚£å°±ä¸€å®šè¦ä¸»åŠ¨æ”¾å¼ƒæ‰§è¡Œæƒï¼Œæ–¹ä¾¿å…¶å®ƒäººä½¿ç”¨CPUå·¥ä½œã€‚

æ€»ç»“æ¥è¯´ï¼Œå¼‚æ­¥ç¼–ç¨‹æ˜¯ä¸€ç§å¹¶å‘ç¼–ç¨‹æ¨¡å‹ï¼Œ**ä»»åŠ¡åªæœ‰å…·å¤‡å¼‚æ­¥ç‰¹æ€§æ‰èƒ½å¹¶å‘æ‰§è¡Œ**ï¼Œä½†ä¿è¯å•ä¸ªäº‹åŠ¡çš„è¿ç»­æ€§ï¼ˆä»£ç æ˜¯å¯å¼‚æ­¥æ‰§è¡Œï¼Œä½†ä¸šåŠ¡é€»è¾‘å¿…é¡»æ˜¯åŒæ­¥å…³ç³»ï¼‰æ˜¯ç¼–ç¨‹ä¸­**å¼‚æ­¥å¤„ç†**çš„å…³é”®è§£å†³ä¹‹é“ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ JavaScript å¼‚æ­¥ç¼–ç¨‹ä¸­çš„å¼‚æ­¥è¿è¡Œæ—¶å’Œç¼–ç¨‹èŒƒå¼ã€‚

## JavaScript çš„æ‰§è¡Œç¯å¢ƒï¼šäº‹ä»¶å¾ªç¯ + å¼‚æ­¥å›è°ƒé˜Ÿåˆ—

JavaScript æ˜¯ä¸€é—¨å•çº¿ç¨‹è¯­è¨€ï¼Œä¸€æ—¦é‡åˆ°é˜»å¡ä»»åŠ¡æ•´ä¸ªçº¿ç¨‹å°±ä¼šå¡ä½
JavaScript å¼•æ“åŸºäºä¸€ä¸ªäº‹ä»¶å¾ªç¯çš„å•çº¿ç¨‹ç¯å¢ƒï¼Œ

JS ä»»åŠ¡ä¸»è¦æ˜¯å•çº¿ç¨‹åŒæ­¥æ‰§è¡Œï¼Œå¯¹äºå¼‚æ­¥ä»»åŠ¡çš„å®ç°ä¸»è¦æ˜¯é€šè¿‡ç¯å¢ƒæä¾›çš„å¼‚æ­¥ API + å¼‚æ­¥å›è°ƒçš„èŒƒå¼å»æ”¯æŒ

## JavaScript å¼‚æ­¥ç¼–ç¨‹èŒƒå¼

- JavaScript å¼‚æ­¥ç¼–ç¨‹èŒƒå¼
  - å›è°ƒ
    - é—®é¢˜
      - å›è°ƒåœ°ç‹±
      - åˆ†æµç»“æœå¤„ç†ï¼šæ¯ç§ä»»åŠ¡çš„å¤„ç†ç»“æœå­˜åœ¨ä¸¤ç§å¯èƒ½æ€§ï¼ˆæˆåŠŸæˆ–å¤±è´¥ï¼‰ï¼Œé‚£ä¹ˆéœ€è¦åœ¨æ¯ç§ä»»åŠ¡æ‰§è¡Œç»“æŸååˆ†åˆ«å¤„ç†è¿™ä¸¤ç§å¯èƒ½æ€§
  - å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼šå‘å¸ƒè®¢é˜…æ¨¡å¼è§£å†³äº†å›è°ƒåœ°ç‹±çš„é—®é¢˜ï¼Œä½†é€»è¾‘ç¢ç‰‡åŒ–çš„é—®é¢˜æ²¡æœ‰è§£å†³
  - [Promise](#promise)
  - Generator & co
  - Async/Await
  - å‡½æ•°å“åº”å¼ç¼–ç¨‹ï¼šæ˜¯ä¸€ç§å‘å¸ƒè®¢é˜…æ¨¡å¼å’Œè¿­ä»£æ¨¡å¼çš„ç»“åˆï¼Œ

### Promise

Promise é€šè¿‡é“¾å¼è°ƒç”¨çš„å†™æ³•è§£å†³äº†å›è°ƒåœ°ç‹±çš„é—®é¢˜ï¼Œå¹¶ä¸”ä¿è¯äº†ç›¸å…³é€»è¾‘çº¿å‹å†…èšï¼Œæ›´ç¬¦åˆäººçš„çº¿æ€§æ€ç»´æ¨¡å¼ï¼Œæé«˜äº†ä¸€å®šçš„å¯è¯»æ€§ã€‚

Promise æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œæœ¬è´¨å¯ä»¥çœ‹ä½œæ˜¯çŠ¶æ€æœºå’Œè§‚å¯Ÿè€…æ¨¡å¼ç»“åˆã€‚

- Promise å®ä¾‹
  - state  ![å›¾ 2](images/1654329152719.png)  
    - pending
    - fulfilled
    - rejected
  - value
  - reason
  - thenï¼šæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯æˆåŠŸæ—¶å›è°ƒï¼Œå¦ä¸€ä¸ªæ˜¯å¤±è´¥æ—¶çš„å›è°ƒï¼Œä¸¤è€…éƒ½æ˜¯å¯é€‰çš„
    - é“¾å¼è°ƒç”¨
    - å»¶è¿Ÿç»‘å®š
    - å€¼ç©¿é€ï¼šå½“æˆ‘ä»¬ä¸åœ¨ then ä¸­æ”¾å…¥å‚æ•°ï¼Œæˆ–è€…å‚æ•°ä¸ä¸º functionï¼Œä¾‹ï¼špromise.then().then()ï¼Œé‚£ä¹ˆå…¶åé¢çš„ then ä¾æ—§å¯ä»¥å¾—åˆ°ä¹‹å‰ then è¿”å›çš„å€¼
    - è¿”å›å€¼ç©¿é€
    - é”™è¯¯å†’æ³¡
  - catch
  - finally
- Promise é™æ€æ–¹æ³•
  - resolve
  - reject
  - allï¼šè¿”å›æ‰€æœ‰çŠ¶æ€æˆåŠŸçš„ Promiseï¼Œå¦åˆ™è¿”å›å¤±è´¥çš„ Promise
  - allSettledï¼šæ‰€æœ‰çš„ Promise çŠ¶æ€å®Œæˆå°±è¿”å›ï¼Œä¸ç®¡å…¶æ˜¯å¦å¤„ç†æˆåŠŸ
  - anyï¼šæ¥æ”¶ä¸€ä¸ªPromiseå¯¹è±¡çš„é›†åˆï¼Œè¿”å›çŠ¶æ€ä¼˜å…ˆæˆåŠŸçš„ Promiseï¼Œå¦åˆ™è¿”å›å…¨éƒ¨å¤±è´¥ç»“æœ
  - raceï¼šæ¥æ”¶ä¸€ä¸ªPromiseå¯¹è±¡çš„é›†åˆï¼Œè¿”å›çŠ¶æ€ä¼˜å…ˆå®Œæˆçš„ Promise


åç¨‹æœ¬è´¨ä¸Šå’Œå•çº¿ç¨‹+çŠ¶æ€æœºæ˜¯ç­‰ä»·çš„ï¼Œåªæ˜¯ç”¨åç¨‹çš„è¯ï¼Œåç¨‹è´Ÿè´£æ¥ä¿å­˜çŠ¶æ€ï¼Œå¼€å‘èµ·æ¥æ–¹ä¾¿äº›ã€‚

### Async/Await å®ç°åŸç†

Async/Await å…¶å®åªæ˜¯è¯­æ³•ç³–ï¼Œé€šè¿‡ç¼–è¯‘å™¨ç¼–è¯‘æˆ Generator å‡½æ•°å’Œé€šè¿‡ Promise å®ç°ä¸€ä¸ªè‡ªåŠ¨æ‰§è¡Œå™¨ã€‚

```js
function _async(gen) {
  const g = gen()
  return new Promise((resolve, reject) => {
    const co = function(res, err) {
      try {
        let { value, done } = err ? g.throw(err) : g.next(res);
        if(done) {
          resolve(value) 
        } else {
          Promise.resolve(value).then(co, (err) => co(null, err))
        }
      } catch (error) {
        reject(error)
      }
    };
    co();
  });
}

function* g() {
  let res = yield Promise.resolve(1);
  const fn = () => 2
  // const fn = () => { throw 2 }
  res += yield Promise.resolve(fn());
  // try {
  //       res += yield Promise.resolve(fn());
  // } catch (error) {
  //       console.log(error)
  // }
  return res;
}

_async(g).then((res) => {
  console.log(res); // 3
});
```

æŠŠç”Ÿæˆå™¨ g è·Ÿ async å‡½æ•°ç‰ˆæœ¬å¯¹æ¯”ä¸€ä¸‹ï¼Œä¸å°±æ˜¯ï¼š

- function* æ¢æˆ async
- yield æ¢æˆ await
- value ç”¨ Promise.resolve(value) åŒ…è£…

```js
async g() {
  let res = await 1;
  const fn = () => { throw 2 }
  res += await fn();
  return res;
}
```

## å‚è€ƒ

- [ä»æ ¹æœ¬ä¸Šäº†è§£å¼‚æ­¥ç¼–ç¨‹ä½“ç³»](https://zhuanlan.zhihu.com/p/434361727)
- [ç™½è¯å¹¶å‘æ¨¡å‹å’Œå¼‚æ­¥ç¼–ç¨‹èŒƒå¼](https://code2life.top/2021/05/31/0062-concurrent-model-async-programming/)
- [å¹¶å‘ç¼–ç¨‹æ¨¡å‹ï¼šäº‹ä»¶é©±åŠ¨ vs çº¿ç¨‹](https://zhuanlan.zhihu.com/p/32961438)
- [Asynchronous programming. Blocking I/O and non-blocking I/O](https://luminousmen.com/post/asynchronous-programming-blocking-and-non-blocking)
- [Asynchronous programming. Cooperative multitasking](https://luminousmen.com/post/asynchronous-programming-cooperative-multitasking)
- [Asynchronous programming. Await the Future](https://luminousmen.com/post/asynchronous-programming-await-the-future)