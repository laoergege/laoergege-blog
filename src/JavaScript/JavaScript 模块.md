# JavaScript 模块

## JavaScript 模块发展历程

### 文件划分阶段

![文件阶段](../../images/文件阶段_20200505125051.png)

该阶段仅仅只是文件上模块化划分，文件模块里的变量成员还是直接工作在全局环境，但

1. 污染全局作用域，容易发生命名冲突 &#x2718;
2. 变量容易被外部访问修改 &#x2718;
3. 难以维护模块依赖关系（我们需要在 HTML 中控制好 script 引入顺序）&#x2718;

### 对象命名空间方式

![文件阶段](../../images/对象命名_20200505125649.png)

用一个全局对象包裹所有模块成员，这种方式就好像是为模块内的成员添加“命名空间”，通过命名空间以及规范命名的方式，能够较大可能解决变量命名冲突问题，但是2、 3问题依旧存在

### IIFE（立即执行函数）

![文件阶段](../../images/立即执行函数_20200505130101.png)

将所有成员放在一个立即执行函数所形成的私有作用域，私有成员只能通过公开成员以闭包的形式访问，而公开成员可以通过挂载全局对象或者返回的方式暴露出去

- 解决了全局污染、命名冲突和成员访问控制 &#x2714;

### IIFE 依赖参数

![IIFE 依赖参数](../../images/IIFE_params_20200505131343.png)

通过 IIFE 依赖参数声明，可以使得模块依赖关系明显

- 但模块依赖管理还是没有解决 &#x2718;

在 ES 语言层面未实现的模块功能前，IIFE 是实现模块化最好的方式。
而模块依赖管理的本质就是模块加载顺序的问题，早期的模块加载顺序管理只能手动维护HTML script 标签的顺序，而要实现自动化模块加载，需要两点

- **统一的模块化标准规范**
- 在同一模块标准规范后，才能实现 **自动加载模块的基础库**


参考
- [webpack 原理与实践]()